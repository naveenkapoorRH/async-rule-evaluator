"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _fs = _interopRequireDefault(require("fs"));

var _path = _interopRequireDefault(require("path"));

var _jison = require("jison");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// eslint-disable-next-line import/no-extraneous-dependencies
function code(args, skipParentheses) {
  const argsJs = args.map(arg => typeof arg === 'number' ? `$${arg}` : JSON.stringify(arg)).join(',');
  return skipParentheses ? `$$ = [${argsJs}];` : `$$ = ["(", ${argsJs}, ")"];`;
}

const grammar = {
  // Lexical tokens
  lex: {
    rules: [['\\*', 'return "*";'], ['\\/', 'return "/";'], ['-', 'return "-";'], ['\\+', 'return "+";'], ['\\^', 'return "^";'], ['\\%', 'return "%";'], ['\\(', 'return "(";'], ['\\[', 'return "[";'], ['\\)', 'return ")";'], ['\\]', 'return "]";'], ['\\,', 'return ",";'], ['==', 'return "==";'], ['\\!=', 'return "!=";'], ['\\~=', 'return "~=";'], ['>=', 'return ">=";'], ['<=', 'return "<=";'], ['<', 'return "<";'], ['>', 'return ">";'], ['\\?', 'return "?";'], ['\\:', 'return ":";'], ['and[^\\w]', 'return "and";'], ['or[^\\w]', 'return "or";'], ['not[^\\w]', 'return "not";'], ['in~[^\\w]', 'return "inexactin";'], ['in[^\\w]', 'return "in";'], ['\\s+', ''], // skip whitespace
    ['[0-9]+(?:\\.[0-9]+)?\\b', 'return "NUMBER";'], // 212.321
    ['[a-zA-Z$_][\\.a-zA-Z0-9$_]*', `yytext = JSON.stringify(yytext);
              return "SYMBOL";`], // some.Symbol22
    // eslint-disable-next-line quotes
    [`'(?:\\\\'|\\\\\\\\|[^'\\\\])*'`, `yytext = yy.buildString("'", yytext);
              return "SYMBOL";`], // 'any \'escaped\' symbol'
    // eslint-disable-next-line quotes
    [`"(?:\\\\"|\\\\\\\\|[^"\\\\])*"`, `yytext = yy.buildString('"', yytext);
              return "STRING";`], // "any \"escaped\" string"
    // End
    ['$', 'return "EOF";']]
  },
  // Operator precedence - lowest precedence first.
  // See http://www.gnu.org/software/bison/manual/html_node/Precedence.html
  // for a good explanation of how it works in Bison (and hence, Jison).
  // Different languages have different rules, but this seems a good starting
  // point: http://en.wikipedia.org/wiki/Order_of_operations#Programming_languages
  operators: [['left', '?', ':'], ['left', 'or'], ['left', 'and'], ['left', 'inexactin'], ['left', 'in'], ['left', '==', '!=', '~='], ['left', '<', '<=', '>', '>='], ['left', '+', '-'], ['left', '*', '/', '%'], ['left', '^'], ['left', 'not'], ['left', 'UMINUS']],
  // Grammar
  bnf: {
    expressions: [// Entry point
    ['e EOF', 'return $1;']],
    e: [['e + e', code([1, '+', 3])], ['e - e', code([1, '-', 3])], ['e * e', code([1, '*', 3])], ['e / e', code([1, '/', 3])], ['e % e', code([1, '%', 3])], ['e ^ e', code(['Math.pow(', 1, ',', 3, ')'])], ['- e', code(['-', 2]), {
      prec: 'UMINUS'
    }], ['e and e', code(['std.numify(', 1, '&&', 3, ')'])], ['e or e', code(['std.numify(', 1, '||', 3, ')'])], ['not e', code(['std.numify(!', 2, ')'])], ['e == e', code(['std.numify(', 1, '==', 3, ')'])], ['e != e', code(['std.numify(', 1, '!=', 3, ')'])], ['e ~= e', code(['std.numify(RegExp(', 3, ').test(', 1, '))'])], ['e < e', code(['std.numify(', 1, '<', 3, ')'])], ['e <= e', code(['std.numify(', 1, '<=', 3, ')'])], ['e > e', code(['std.numify(', 1, '> ', 3, ')'])], ['e >= e', code(['std.numify(', 1, '>=', 3, ')'])], ['e ? e : e', code([1, '?', 3, ':', 5])], ['( e )', code([2])], ['[ e ]', code(['[', 2, ']'])], ['( array , e )', code(['[', 2, ',', 4, ']'])], ['[ array , e ]', code(['[', 2, ',', 4, ']'])], ['NUMBER', code([1])], ['STRING', code([1])], ['SYMBOL', code(['await prop(', 1, ')'])], ['SYMBOL ( )', code(['(std.isfn(fns, ', 1, ') ? fns[', 1, ']() : std.unknown(', 1, '))'])], ['SYMBOL ( argsList )', code(['(std.isfn(fns, ', 1, ') ? fns[', 1, '](', 3, ') : std.unknown(', 1, '))'])], ['e in e', code(['std.isSubset(', 1, ', ', 3, ')'])], ['e inexactin e', code(['std.isSubsetInexact(', 1, ', ', 3, ')'])], ['e not in e', code(['+!std.isSubset(', 1, ', ', 4, ')'])], ['e not inexactin e', code(['+!std.isSubsetInexact(', 1, ', ', 4, ')'])]],
    argsList: [['e', code([1], true)], ['argsList , e', code([1, ',', 3], true)]],
    inSet: [['e', code(['o ==', 1], true)], ['inSet , e', code([1, '|| o ==', 3], true)]],
    array: [['e', code([1])], ['array , e', code([1, ',', 3], true)]]
  }
};
const parser = new _jison.Parser(grammar);
var _default = parser;
exports.default = _default;

function emptyModuleMain() {}

if (require.main === module) {
  const parserSource = parser.generate({
    moduleMain: emptyModuleMain
  });

  _fs.default.writeFileSync(_path.default.join(__dirname, '..', 'parser.js'), parserSource, 'utf8');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9sYW5ndWFnZS5qcyJdLCJuYW1lcyI6WyJjb2RlIiwiYXJncyIsInNraXBQYXJlbnRoZXNlcyIsImFyZ3NKcyIsIm1hcCIsImFyZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJqb2luIiwiZ3JhbW1hciIsImxleCIsInJ1bGVzIiwib3BlcmF0b3JzIiwiYm5mIiwiZXhwcmVzc2lvbnMiLCJlIiwicHJlYyIsImFyZ3NMaXN0IiwiaW5TZXQiLCJhcnJheSIsInBhcnNlciIsIlBhcnNlciIsImVtcHR5TW9kdWxlTWFpbiIsInJlcXVpcmUiLCJtYWluIiwibW9kdWxlIiwicGFyc2VyU291cmNlIiwiZ2VuZXJhdGUiLCJtb2R1bGVNYWluIiwiZnMiLCJ3cml0ZUZpbGVTeW5jIiwicGF0aCIsIl9fZGlybmFtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUVBOzs7O0FBREE7QUFHQSxTQUFTQSxJQUFULENBQWNDLElBQWQsRUFBb0JDLGVBQXBCLEVBQXFDO0FBQ25DLFFBQU1DLE1BQU0sR0FBR0YsSUFBSSxDQUFDRyxHQUFMLENBQVNDLEdBQUcsSUFBSyxPQUFPQSxHQUFQLEtBQWUsUUFBZixHQUEyQixJQUFHQSxHQUFJLEVBQWxDLEdBQXNDQyxJQUFJLENBQUNDLFNBQUwsQ0FBZUYsR0FBZixDQUF2RCxFQUE2RUcsSUFBN0UsQ0FBa0YsR0FBbEYsQ0FBZjtBQUVBLFNBQU9OLGVBQWUsR0FBSSxTQUFRQyxNQUFPLElBQW5CLEdBQTBCLGNBQWFBLE1BQU8sU0FBcEU7QUFDRDs7QUFFRCxNQUFNTSxPQUFPLEdBQUc7QUFDZDtBQUNBQyxFQUFBQSxHQUFHLEVBQUU7QUFDSEMsSUFBQUEsS0FBSyxFQUFFLENBQ0wsQ0FBQyxLQUFELEVBQVEsYUFBUixDQURLLEVBRUwsQ0FBQyxLQUFELEVBQVEsYUFBUixDQUZLLEVBR0wsQ0FBQyxHQUFELEVBQU0sYUFBTixDQUhLLEVBSUwsQ0FBQyxLQUFELEVBQVEsYUFBUixDQUpLLEVBS0wsQ0FBQyxLQUFE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Q29udGVudCI6WyJpbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzXG5pbXBvcnQgeyBQYXJzZXIgfSBmcm9tICdqaXNvbic7XG5cbmZ1bmN0aW9uIGNvZGUoYXJncywgc2tpcFBhcmVudGhlc2VzKSB7XG4gIGNvbnN0IGFyZ3NKcyA9IGFyZ3MubWFwKGFyZyA9PiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicgPyBgJCR7YXJnfWAgOiBKU09OLnN0cmluZ2lmeShhcmcpKSkuam9pbignLCcpO1xuXG4gIHJldHVybiBza2lwUGFyZW50aGVzZXMgPyBgJCQgPSBbJHthcmdzSnN9XTtgIDogYCQkID0gW1wiKFwiLCAke2FyZ3NKc30sIFwiKVwiXTtgO1xufVxuXG5jb25zdCBncmFtbWFyID0ge1xuICAvLyBMZXhpY2FsIHRva2Vuc1xuICBsZXg6IHtcbiAgICBydWxlczogW1xuICAgICAgWydcXFxcKicsICdyZXR1cm4gXCIqXCI7J10sXG4gICAgICBbJ1xcXFwvJywgJ3JldHVybiBcIi9cIjsnXSxcbiAgICAgIFsnLScsICdyZXR1cm4gXCItXCI7J10sXG4gICAgICBbJ1xcXFwrJywgJ3JldHVybiBcIitcIjsnXSxcbiAgICAgIFsnXFxcXF4nLCAncmV0dXJuIFwiXlwiOyddLFxuICAgICAgWydcXFxcJScsICdyZXR1cm4gXCIlXCI7J10sXG4gICAgICBbJ1xcXFwoJywgJ3JldHVybiBcIihcIjsnXSxcbiAgICAgIFsnXFxcXFsnLCAncmV0dXJuIFwiW1wiOyddLFxuICAgICAgWydcXFxcKScsICdyZXR1cm4gXCIpXCI7J10sXG4gICAgICBbJ1xcXFxdJywgJ3JldHVybiBcIl1cIjsnXSxcbiAgICAgIFsnXFxcXCwnLCAncmV0dXJuIFwiLFwiOyddLFxuICAgICAgWyc9PScsICdyZXR1cm4gXCI9PVwiOyddLFxuICAgICAgWydcXFxcIT0nLCAncmV0dXJuIFwiIT1cIjsnXSxcbiAgICAgIFsnXFxcXH49JywgJ3JldHVybiBcIn49XCI7J10sXG4gICAgICBbJz49JywgJ3JldHVybiBcIj49XCI7J10sXG4gICAgICBbJzw9JywgJ3JldHVybiBcIjw9XCI7J10sXG4gICAgICBbJzwnLCAncmV0dXJuIFwiPFwiOyddLFxuICAgICAgWyc+JywgJ3JldHVybiBcIj5cIjsnXSxcbiAgICAgIFsnXFxcXD8nLCAncmV0dXJuIFwiP1wiOyddLFxuICAgICAgWydcXFxcOicsICdyZXR1cm4gXCI6XCI7J10sXG4gICAgICBbJ2FuZFteXFxcXHddJywgJ3JldHVybiBcImFuZFwiOyddLFxuICAgICAgWydvclteXFxcXHddJywgJ3JldHVybiBcIm9yXCI7J10sXG4gICAgICBbJ25vdFteXFxcXHddJywgJ3JldHVybiBcIm5vdFwiOyddLFxuICAgICAgWydpbn5bXlxcXFx3XScsICdyZXR1cm4gXCJpbmV4YWN0aW5cIjsnXSxcbiAgICAgIFsnaW5bXlxcXFx3XScsICdyZXR1cm4gXCJpblwiOyddLFxuXG4gICAgICBbJ1xcXFxzKycsICcnXSwgLy8gc2tpcCB3aGl0ZXNwYWNlXG4gICAgICBbJ1swLTldKyg/OlxcXFwuWzAtOV0rKT9cXFxcYicsICdyZXR1cm4gXCJOVU1CRVJcIjsnXSwgLy8gMjEyLjMyMVxuXG4gICAgICBbJ1thLXpBLVokX11bXFxcXC5hLXpBLVowLTkkX10qJyxcbiAgICAgICAgYHl5dGV4dCA9IEpTT04uc3RyaW5naWZ5KHl5dGV4dCk7XG4gICAgICAgICAgICAgIHJldHVybiBcIlNZTUJPTFwiO2AsXG4gICAgICBdLCAvLyBzb21lLlN5bWJvbDIyXG5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBxdW90ZXNcbiAgICAgIFtgJyg/OlxcXFxcXFxcJ3xcXFxcXFxcXFxcXFxcXFxcfFteJ1xcXFxcXFxcXSkqJ2AsXG4gICAgICAgIGB5eXRleHQgPSB5eS5idWlsZFN0cmluZyhcIidcIiwgeXl0ZXh0KTtcbiAgICAgICAgICAgICAgcmV0dXJuIFwiU1lNQk9MXCI7YCxcbiAgICAgIF0sIC8vICdhbnkgXFwnZXNjYXBlZFxcJyBzeW1ib2wnXG5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBxdW90ZXNcbiAgICAgIFtgXCIoPzpcXFxcXFxcXFwifFxcXFxcXFxcXFxcXFxcXFx8W15cIlxcXFxcXFxcXSkqXCJgLFxuICAgICAgICBgeXl0ZXh0ID0geXkuYnVpbGRTdHJpbmcoJ1wiJywgeXl0ZXh0KTtcbiAgICAgICAgICAgICAgcmV0dXJuIFwiU1RSSU5HXCI7YCxcbiAgICAgIF0sIC8vIFwiYW55IFxcXCJlc2NhcGVkXFxcIiBzdHJpbmdcIlxuXG4gICAgICAvLyBFbmRcbiAgICAgIFsnJCcsICdyZXR1cm4gXCJFT0ZcIjsnXSxcbiAgICBdLFxuICB9LFxuICAvLyBPcGVyYXRvciBwcmVjZWRlbmNlIC0gbG93ZXN0IHByZWNlZGVuY2UgZmlyc3QuXG4gIC8vIFNlZSBodHRwOi8vd3d3LmdudS5vcmcvc29mdHdhcmUvYmlzb24vbWFudWFsL2h0bWxfbm9kZS9QcmVjZWRlbmNlLmh0bWxcbiAgLy8gZm9yIGEgZ29vZCBleHBsYW5hdGlvbiBvZiBob3cgaXQgd29ya3MgaW4gQmlzb24gKGFuZCBoZW5jZSwgSmlzb24pLlxuICAvLyBEaWZmZXJlbnQgbGFuZ3VhZ2VzIGhhdmUgZGlmZmVyZW50IHJ1bGVzLCBidXQgdGhpcyBzZWVtcyBhIGdvb2Qgc3RhcnRpbmdcbiAgLy8gcG9pbnQ6IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvT3JkZXJfb2Zfb3BlcmF0aW9ucyNQcm9ncmFtbWluZ19sYW5ndWFnZXNcbiAgb3BlcmF0b3JzOiBbXG4gICAgWydsZWZ0JywgJz8nLCAnOiddLFxuICAgIFsnbGVmdCcsICdvciddLFxuICAgIFsnbGVmdCcsICdhbmQnXSxcbiAgICBbJ2xlZnQnLCAnaW5leGFjdGluJ10sXG4gICAgWydsZWZ0JywgJ2luJ10sXG4gICAgWydsZWZ0JywgJz09JywgJyE9JywgJ349J10sXG4gICAgWydsZWZ0JywgJzwnLCAnPD0nLCAnPicsICc+PSddLFxuICAgIFsnbGVmdCcsICcrJywgJy0nXSxcbiAgICBbJ2xlZnQnLCAnKicsICcvJywgJyUnXSxcbiAgICBbJ2xlZnQnLCAnXiddLFxuICAgIFsnbGVmdCcsICdub3QnXSxcbiAgICBbJ2xlZnQnLCAnVU1JTlVTJ10sXG4gIF0sXG4gIC8vIEdyYW1tYXJcbiAgYm5mOiB7XG4gICAgZXhwcmVzc2lvbnM6IFsgLy8gRW50cnkgcG9pbnRcbiAgICAgIFsnZSBFT0YnLCAncmV0dXJuICQxOyddLFxuICAgIF0sXG4gICAgZTogW1xuICAgICAgWydlICsgZScsIGNvZGUoWzEsICcrJywgM10pXSxcbiAgICAgIFsnZSAtIGUnLCBjb2RlKFsxLCAnLScsIDNdKV0sXG4gICAgICBbJ2UgKiBlJywgY29kZShbMSwgJyonLCAzXSldLFxuICAgICAgWydlIC8gZScsIGNvZGUoWzEsICcvJywgM10pXSxcbiAgICAgIFsnZSAlIGUnLCBjb2RlKFsxLCAnJScsIDNdKV0sXG4gICAgICBbJ2UgXiBlJywgY29kZShbJ01hdGgucG93KCcsIDEsICcsJywgMywgJyknXSldLFxuICAgICAgWyctIGUnLCBjb2RlKFsnLScsIDJdKSwgeyBwcmVjOiAnVU1JTlVTJyB9XSxcbiAgICAgIFsnZSBhbmQgZScsIGNvZGUoWydzdGQubnVtaWZ5KCcsIDEsICcmJicsIDMsICcpJ10pXSxcbiAgICAgIFsnZSBvciBlJywgY29kZShbJ3N0ZC5udW1pZnkoJywgMSwgJ3x8JywgMywgJyknXSldLFxuICAgICAgWydub3QgZScsIGNvZGUoWydzdGQubnVtaWZ5KCEnLCAyLCAnKSddKV0sXG4gICAgICBbJ2UgPT0gZScsIGNvZGUoWydzdGQubnVtaWZ5KCcsIDEsICc9PScsIDMsICcpJ10pXSxcbiAgICAgIFsnZSAhPSBlJywgY29kZShbJ3N0ZC5udW1pZnkoJywgMSwgJyE9JywgMywgJyknXSldLFxuICAgICAgWydlIH49IGUnLCBjb2RlKFsnc3RkLm51bWlmeShSZWdFeHAoJywgMywgJykudGVzdCgnLCAxLCAnKSknXSldLFxuICAgICAgWydlIDwgZScsIGNvZGUoWydzdGQubnVtaWZ5KCcsIDEsICc8JywgMywgJyknXSldLFxuICAgICAgWydlIDw9IGUnLCBjb2RlKFsnc3RkLm51bWlmeSgnLCAxLCAnPD0nLCAzLCAnKSddKV0sXG4gICAgICBbJ2UgPiBlJywgY29kZShbJ3N0ZC5udW1pZnkoJywgMSwgJz4gJywgMywgJyknXSldLFxuICAgICAgWydlID49IGUnLCBjb2RlKFsnc3RkLm51bWlmeSgnLCAxLCAnPj0nLCAzLCAnKSddKV0sXG4gICAgICBbJ2UgPyBlIDogZScsIGNvZGUoWzEsICc/JywgMywgJzonLCA1XSldLFxuICAgICAgWycoIGUgKScsIGNvZGUoWzJdKV0sXG4gICAgICBbJ1sgZSBdJywgY29kZShbJ1snLCAyLCAnXSddKV0sXG4gICAgICBbJyggYXJyYXkgLCBlICknLCBjb2RlKFsnWycsIDIsICcsJywgNCwgJ10nXSldLFxuICAgICAgWydbIGFycmF5ICwgZSBdJywgY29kZShbJ1snLCAyLCAnLCcsIDQsICddJ10pXSxcbiAgICAgIFsnTlVNQkVSJywgY29kZShbMV0pXSxcbiAgICAgIFsnU1RSSU5HJywgY29kZShbMV0pXSxcbiAgICAgIFsnU1lNQk9MJywgY29kZShbJ2F3YWl0IHByb3AoJywgMSwgJyknXSldLFxuICAgICAgWydTWU1CT0wgKCApJywgY29kZShbJyhzdGQuaXNmbihmbnMsICcsIDEsICcpID8gZm5zWycsIDEsICddKCkgOiBzdGQudW5rbm93bignLCAxLCAnKSknXSldLFxuICAgICAgWydTWU1CT0wgKCBhcmdzTGlzdCApJywgY29kZShbJyhzdGQuaXNmbihmbnMsICcsIDEsICcpID8gZm5zWycsIDEsICddKCcsIDMsICcpIDogc3RkLnVua25vd24oJywgMSwgJykpJ10pXSxcbiAgICAgIFsnZSBpbiBlJywgY29kZShbJ3N0ZC5pc1N1YnNldCgnLCAxLCAnLCAnLCAzLCAnKSddKV0sXG4gICAgICBbJ2UgaW5leGFjdGluIGUnLCBjb2RlKFsnc3RkLmlzU3Vic2V0SW5leGFjdCgnLCAxLCAnLCAnLCAzLCAnKSddKV0sXG4gICAgICBbJ2Ugbm90IGluIGUnLCBjb2RlKFsnKyFzdGQuaXNTdWJzZXQoJywgMSwgJywgJywgNCwgJyknXSldLFxuICAgICAgWydlIG5vdCBpbmV4YWN0aW4gZScsIGNvZGUoWycrIXN0ZC5pc1N1YnNldEluZXhhY3QoJywgMSwgJywgJywgNCwgJyknXSldLFxuICAgIF0sXG4gICAgYXJnc0xpc3Q6IFtcbiAgICAgIFsnZScsIGNvZGUoWzFdLCB0cnVlKV0sXG4gICAgICBbJ2FyZ3NMaXN0ICwgZScsIGNvZGUoWzEsICcsJywgM10sIHRydWUpXSxcbiAgICBdLFxuICAgIGluU2V0OiBbXG4gICAgICBbJ2UnLCBjb2RlKFsnbyA9PScsIDFdLCB0cnVlKV0sXG4gICAgICBbJ2luU2V0ICwgZScsIGNvZGUoWzEsICd8fCBvID09JywgM10sIHRydWUpXSxcbiAgICBdLFxuICAgIGFycmF5OiBbXG4gICAgICBbJ2UnLCBjb2RlKFsxXSldLFxuICAgICAgWydhcnJheSAsIGUnLCBjb2RlKFsxLCAnLCcsIDNdLCB0cnVlKV0sXG4gICAgXSxcbiAgfSxcbn07XG5cbmNvbnN0IHBhcnNlciA9IG5ldyBQYXJzZXIoZ3JhbW1hcik7XG5cbmV4cG9ydCBkZWZhdWx0IHBhcnNlcjtcblxuZnVuY3Rpb24gZW1wdHlNb2R1bGVNYWluKCkge1xuXG59XG5cbmlmIChyZXF1aXJlLm1haW4gPT09IG1vZHVsZSkge1xuICBjb25zdCBwYXJzZXJTb3VyY2UgPSBwYXJzZXIuZ2VuZXJhdGUoeyBtb2R1bGVNYWluOiBlbXB0eU1vZHVsZU1haW4gfSk7XG4gIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJywgJ3BhcnNlci5qcycpLCBwYXJzZXJTb3VyY2UsICd1dGY4Jyk7XG59XG4iXX0=